<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Table Web Component Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
      background: #f9fafb;
    }
    
    h1 {
      color: #1f2937;
      margin-bottom: 12px;
    }
    
    p {
      color: #6b7280;
      margin-bottom: 32px;
    }
    
    .demo-section {
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
    }
    
    .code-block {
      background: #1f2937;
      color: #e5e7eb;
      padding: 16px;
      border-radius: 8px;
      overflow-x: auto;
      margin-top: 16px;
    }
    
    code {
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>üéâ Data Table Web Component Demo</h1>
  <p>Ez egy standalone Web Component, ami Angular Elements-szel k√©sz√ºlt, de haszn√°lhat√≥ Angular n√©lk√ºl is!</p>

  <div class="demo-section">
    <h2>P√©lda 1: Attrib√∫tumokkal (JSON stringk√©nt)</h2>
    <data-table 
      id="table1"
      columns='[{"key":"id","label":"ID","sortable":true},{"key":"name","label":"N√©v","sortable":true},{"key":"email","label":"E-mail","sortable":true}]'
      data='[{"id":1,"name":"Kov√°cs J√°nos","email":"kovacs.janos@example.com"},{"id":2,"name":"Nagy Anna2","email":"nagy.anna@example.com"}]'>
    </data-table>

    <div class="code-block">
      <code>
&lt;data-table <br>
&nbsp;&nbsp;columns='[{"key":"id","label":"ID","sortable":true},...]' <br>
&nbsp;&nbsp;data='[{"id":1,"name":"Kov√°cs J√°nos",...},...]'&gt;<br>
&lt;/data-table&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 2: Window property-kb≈ël</h2>
    <p style="font-size: 14px; color: #6b7280;">Az adatok a <code>window.tableConfig</code> √©s <code>window.serverData</code> objektumokb√≥l j√∂nnek</p>
    <data-table id="table2"></data-table>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;const table2 = document.getElementById('table2');<br>
&nbsp;&nbsp;table2.columns = window.tableConfig.columns;<br>
&nbsp;&nbsp;table2.data = window.tableConfig.data;<br>
&lt;/script&gt;<br>
&lt;data-table id="table2"&gt;&lt;/data-table&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 3: JavaScript property-kkel</h2>
    <data-table id="table3"></data-table>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;const table3 = document.getElementById('table3');<br>
&nbsp;&nbsp;table3.columns = [...];<br>
&nbsp;&nbsp;table3.data = [...];<br>
&lt;/script&gt;<br>
&lt;data-table id="table3"&gt;&lt;/data-table&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 4: Dinamikus adatfriss√≠t√©s</h2>
    <button onclick="addRow()" style="margin-bottom: 16px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
      √öj sor hozz√°ad√°sa
    </button>
    <data-table id="table4"></data-table>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;function addRow() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;const table4 = document.getElementById('table4');<br>
&nbsp;&nbsp;&nbsp;&nbsp;table4.data = [...table4.data, { ... }];<br>
&nbsp;&nbsp;}<br>
&lt;/script&gt;<br>
&lt;button onclick="addRow()"&gt;√öj sor hozz√°ad√°sa&lt;/button&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 5: Automatikus window bet√∂lt√©s</h2>
    <p style="font-size: 14px; color: #6b7280;">Ez a t√°bl√°zat automatikusan bet√∂lti az adatokat a <code>window.tableConfig</code>-b√≥l, JavaScript k√≥d n√©lk√ºl!</p>
    <data-table></data-table>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;window.tableConfig = { columns: [...], data: [...] };<br>
&lt;/script&gt;<br>
&lt;!-- Automatikus bet√∂lt√©s window.tableConfig-b√≥l --&gt;<br>
&lt;data-table&gt;&lt;/data-table&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 6: Realtime adatfriss√≠t√©s</h2>
    <p style="font-size: 14px; color: #6b7280;">
      <span style="color: #16a34a; font-weight: 600;">‚úì Property-alap√∫</span> - Hat√©kony realtime friss√≠t√©s<br>
      <span style="color: #dc2626; font-weight: 600;">‚úó Attrib√∫tum-alap√∫</span> - Lass√∫, sok stringify
    </p>
    <button onclick="toggleRealtime()" id="realtimeBtn" style="margin-bottom: 16px; padding: 8px 16px; background: #16a34a; color: white; border: none; border-radius: 6px; cursor: pointer;">
      Realtime ind√≠t√°sa
    </button>
    <span id="updateCounter" style="margin-left: 12px; font-size: 14px; color: #6b7280;"></span>
    <data-table id="realtimeTable"></data-table>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;setInterval(() => {<br>
&nbsp;&nbsp;&nbsp;&nbsp;realtimeTable.data = [newRow, ...realtimeTable.data.slice(0, 9)];<br>
&nbsp;&nbsp;}, 1000);<br>
&lt;/script&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 7: Output esem√©nyek (rowAdded, rowDeleted, dataChanged)</h2>
    <p style="font-size: 14px; color: #6b7280;">
      A t√°bl√°zat esem√©nyeket bocs√°t ki amikor v√°ltozik az adat. Pr√≥b√°ld ki: t√∂r√∂ld vagy adj hozz√° sort!
    </p>
    
    <button onclick="addEventRow()" style="margin-bottom: 16px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
      √öj sor hozz√°ad√°sa (rowAdded esem√©ny)
    </button>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
      <div>
        <h3 style="margin-bottom: 12px; font-size: 16px;">T√°bl√°zat (t√∂rl√©s: rowDeleted esem√©ny)</h3>
        <data-table id="eventTable"></data-table>
      </div>
      
      <div>
        <h3 style="margin-bottom: 12px; font-size: 16px;">Esem√©ny Log</h3>
        <div id="eventLog" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 8px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px;">
          <div style="color: #9ca3af;">Esem√©nyek itt jelennek meg...</div>
        </div>
      </div>
    </div>

    <div class="code-block">
      <code>
&lt;script&gt;<br>
&nbsp;&nbsp;const eventTable = document.getElementById('eventTable');<br>
&nbsp;&nbsp;eventTable.addEventListener('rowDeleted', (event) =&gt; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log('T√∂r√∂lve:', event.detail);<br>
&nbsp;&nbsp;});<br>
&lt;/script&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 8: Attrib√∫tum-alap√∫ event handler-ek</h2>
    <p style="font-size: 14px; color: #6b7280;">
      Az esem√©nyeket HTML attrib√∫tumk√©nt is megadhatod, mint a nat√≠v <code>onclick</code>!
    </p>

    <button onclick="addAttributeRow()" style="margin-bottom: 16px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">
      √öj sor hozz√°ad√°sa
    </button>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
      <div>
        <h3 style="margin-bottom: 12px; font-size: 16px;">T√°bl√°zat (attrib√∫tum-alap√∫ event-ek)</h3>
        <data-table 
          id="attributeTable"
          on-row-deleted="handleAttributeDelete"
          on-data-changed="handleAttributeDataChange">
        </data-table>
      </div>
      
      <div>
        <h3 style="margin-bottom: 12px; font-size: 16px;">Callback Log</h3>
        <div id="attributeLog" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 8px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px;">
          <div style="color: #9ca3af;">Callback-ek itt jelennek meg...</div>
        </div>
      </div>
    </div>

    <div class="code-block">
      <code>
&lt;data-table <br>
&nbsp;&nbsp;on-row-deleted="handleAttributeDelete"<br>
&nbsp;&nbsp;on-data-changed="handleAttributeDataChange"&gt;<br>
&lt;/data-table&gt;
      </code>
    </div>
  </div>

  <div class="demo-section">
    <h2>P√©lda 9: Teljesen kapszul√°zott API komponens</h2>
    <p style="font-size: 14px; color: #6b7280;">
      A <code>&lt;data-table-wrapper&gt;</code> teljesen √∂nell√°t√≥: ≈ë tudja az oszlopokat, k√©ri le az adatokat √©s saj√°t bels≈ë template-et haszn√°l.
    </p>
    
    <data-table-wrapper api-url="https://jsonplaceholder.typicode.com/users"></data-table-wrapper>

    <div class="code-block">
      <code>
&lt;data-table-wrapper <br>
&nbsp;&nbsp;api-url="https://jsonplaceholder.typicode.com/users"&gt;<br>
&lt;/data-table-wrapper&gt;
      </code>
    </div>
  </div>

  <!-- Web Component bundle bet√∂lt√©se - build ut√°n lesz el√©rhet≈ë -->
  <script src="dist/WebComponentsPoc/browser/main.js"></script>

  <script>
    // P√©lda: Backend √°ltal gener√°lt glob√°lis adatok (server-side rendering scenario)
    window.tableConfig = {
      columns: [
        { key: 'id', label: 'ID', sortable: true },
        { key: 'category', label: 'Kateg√≥ria', sortable: true },
        { key: 'description', label: 'Le√≠r√°s', sortable: false }
      ],
      data: [
        { id: 1, category: 'Backend', description: 'Node.js API fejleszt√©s' },
        { id: 2, category: 'Frontend', description: 'React komponensek' },
        { id: 3, category: 'DevOps', description: 'CI/CD pipeline' }
      ]
    };

    window.serverData = [
      { id: 1, user: 'admin', action: 'login', time: '09:15' },
      { id: 2, user: 'user1', action: 'upload', time: '10:23' },
      { id: 3, user: 'user2', action: 'download', time: '11:47' }
    ];

    // V√°runk, am√≠g a custom element regisztr√°lva lesz
    customElements.whenDefined('data-table').then(() => {
      // M√°sodik t√°bl√°zat: Window property-kb≈ël
      const table2 = document.getElementById('table2');
      // Window property-kb≈ël t√∂ltj√ºk be az adatokat (server-side rendering scenario)
      table2.columns = window.tableConfig.columns;
      table2.data = window.tableConfig.data;

      // Harmadik t√°bl√°zat: JavaScript property-kkel
      const table3 = document.getElementById('table3');
      table3.columns = [
        { key: 'id', label: 'ID', sortable: true },
        { key: 'name', label: 'N√©v', sortable: true },
        { key: 'email', label: 'E-mail', sortable: true },
        { key: 'role', label: 'Szerepk√∂r', sortable: true },
        { key: 'status', label: 'St√°tusz', sortable: false }
      ];
      
      table3.data = [
        { id: 1, name: 'Kov√°cs J√°nos', email: 'kovacs.janos@example.com', role: 'Admin', status: 'Akt√≠v' },
        { id: 2, name: 'Nagy Anna', email: 'nagy.anna@example.com', role: 'Felhaszn√°l√≥', status: 'Akt√≠v' },
        { id: 3, name: 'Szab√≥ P√©ter', email: 'szabo.peter@example.com', role: 'Moder√°tor', status: 'Inakt√≠v' },
        { id: 4, name: 'T√≥th Katalin', email: 'toth.katalin@example.com', role: 'Felhaszn√°l√≥', status: 'Akt√≠v' },
        { id: 5, name: 'Kiss L√°szl√≥', email: 'kiss.laszlo@example.com', role: 'Admin', status: 'Akt√≠v' }
      ];

      // Negyedik t√°bl√°zat: Dinamikus adatok
      const table4 = document.getElementById('table4');
      table4.columns = [
        { key: 'id', label: 'ID', sortable: true },
        { key: 'product', label: 'Term√©k', sortable: true },
        { key: 'price', label: '√År', sortable: true }
      ];
      
      table4.data = [
        { id: 1, product: 'Laptop', price: '150.000 Ft' },
        { id: 2, product: 'Monitor', price: '45.000 Ft' }
      ];

      // Esem√©ny t√°bl√°zat inicializ√°l√°sa
      const eventTable = document.getElementById('eventTable');
      eventTable.columns = [
        { key: 'id', label: 'ID', sortable: true },
        { key: 'name', label: 'Term√©k', sortable: true },
        { key: 'quantity', label: 'Mennyis√©g', sortable: true }
      ];
      
      eventTable.data = [
        { id: 1, name: 'Eg√©r', quantity: 5 },
        { id: 2, name: 'Billenty≈±zet', quantity: 3 },
        { id: 3, name: 'Monitor', quantity: 2 }
      ];

      // Event listener-ek be√°ll√≠t√°sa
      eventTable.addEventListener('rowDeleted', (event) => {
        logEvent('rowDeleted', event.detail);
      });

      eventTable.addEventListener('rowAdded', (event) => {
        logEvent('rowAdded', event.detail);
      });

      eventTable.addEventListener('dataChanged', (event) => {
        logEvent('dataChanged', { rowCount: event.detail.length });
      });

      // Attrib√∫tum t√°bl√°zat inicializ√°l√°sa
      const attributeTable = document.getElementById('attributeTable');
      attributeTable.columns = [
        { key: 'id', label: 'ID', sortable: true },
        { key: 'item', label: 'Term√©k', sortable: true },
        { key: 'stock', label: 'K√©szlet', sortable: true }
      ];
      
      attributeTable.data = [
        { id: 1, item: 'iPhone', stock: 12 },
        { id: 2, item: 'iPad', stock: 8 },
        { id: 3, item: 'MacBook', stock: 5 }
      ];
    });

    // Glob√°lis callback f√ºggv√©nyek (attrib√∫tum-alap√∫ event-ekhez)
    window.handleAttributeDelete = function(row) {
      logAttributeEvent('handleAttributeDelete', row);
    };

    window.handleAttributeDataChange = function(data) {
      logAttributeEvent('handleAttributeDataChange', { rowCount: data.length });
    };

    let nextId = 3;
    function addRow() {
      const table4 = document.getElementById('table4');
      const products = ['Eg√©r', 'Billenty≈±zet', 'Headset', 'Webcam', 'USB Hub'];
      const randomProduct = products[Math.floor(Math.random() * products.length)];
      const randomPrice = Math.floor(Math.random() * 50000) + 10000;
      
      table4.data = [
        ...table4.data,
        { id: nextId++, product: randomProduct, price: randomPrice.toLocaleString('hu-HU') + ' Ft' }
      ];
    }

    // Realtime friss√≠t√©s p√©lda
    let realtimeInterval = null;
    let updateCount = 0;
    let isRunning = false;

    function toggleRealtime() {
      const btn = document.getElementById('realtimeBtn');
      const counter = document.getElementById('updateCounter');
      
      if (isRunning) {
        // Le√°ll√≠t√°s
        clearInterval(realtimeInterval);
        btn.textContent = 'Realtime ind√≠t√°sa';
        btn.style.background = '#16a34a';
        isRunning = false;
      } else {
        // Ind√≠t√°s
        const realtimeTable = document.getElementById('realtimeTable');
        realtimeTable.columns = [
          { key: 'timestamp', label: 'Id≈ëb√©lyeg', sortable: true },
          { key: 'value', label: '√ârt√©k', sortable: true },
          { key: 'status', label: 'St√°tusz', sortable: false }
        ];
        
        btn.textContent = 'Realtime le√°ll√≠t√°sa';
        btn.style.background = '#dc2626';
        isRunning = true;
        updateCount = 0;

        // Realtime adatfriss√≠t√©s - property-alap√∫ (hat√©kony)
        realtimeInterval = setInterval(() => {
          updateCount++;
          const now = new Date();
          const timestamp = now.toLocaleTimeString('hu-HU');
          const value = Math.floor(Math.random() * 100);
          const statuses = ['Akt√≠v', 'V√°rakozik', 'Feldolgozva'];
          const status = statuses[Math.floor(Math.random() * statuses.length)];
          
          // Property-alap√∫ friss√≠t√©s - egyszer≈±en √°tadjuk az √∫j adatot
          realtimeTable.data = [
            { timestamp, value: value + ' %', status },
            ...realtimeTable.data.slice(0, 9) // Max 10 sor
          ];
          
          counter.textContent = `Friss√≠t√©sek: ${updateCount}`;
        }, 1000); // M√°sodpercenk√©nt friss√≠t
      }
    }

    // Event log helper
    function logEvent(eventName, data) {
      const log = document.getElementById('eventLog');
      const timestamp = new Date().toLocaleTimeString('hu-HU');
      const color = eventName === 'rowDeleted' ? '#ef4444' : eventName === 'rowAdded' ? '#22c55e' : '#3b82f6';
      
      const entry = document.createElement('div');
      entry.style.marginBottom = '8px';
      entry.style.paddingBottom = '8px';
      entry.style.borderBottom = '1px solid #374151';
      entry.innerHTML = `
        <span style="color: #9ca3af;">[${timestamp}]</span>
        <span style="color: ${color}; font-weight: bold;">${eventName}</span>
        <pre style="margin: 4px 0 0 0; color: #e5e7eb;">${JSON.stringify(data, null, 2)}</pre>
      `;
      
      log.insertBefore(entry, log.firstChild);
      
      // Max 10 esem√©ny
      while (log.children.length > 10) {
        log.removeChild(log.lastChild);
      }
    }

    // √öj sor hozz√°ad√°sa az esem√©ny t√°bl√°hoz
    let eventRowId = 4;
    function addEventRow() {
      const eventTable = document.getElementById('eventTable');
      const products = ['Headset', 'Webcam', 'USB Hub', 'Pendrive', 'Laptop t√°ska'];
      const randomProduct = products[Math.floor(Math.random() * products.length)];
      const randomQuantity = Math.floor(Math.random() * 10) + 1;
      
      const newRow = { 
        id: eventRowId++, 
        name: randomProduct, 
        quantity: randomQuantity 
      };
      
      eventTable.data = [newRow, ...eventTable.data];
      
      // Manu√°lisan is kibocs√°thatjuk az esem√©nyt (de a komponens is kibocs√°tja)
      eventTable.dispatchEvent(new CustomEvent('rowAdded', { detail: newRow }));
    }

    // Attrib√∫tum log helper
    function logAttributeEvent(callbackName, data) {
      const log = document.getElementById('attributeLog');
      const timestamp = new Date().toLocaleTimeString('hu-HU');
      
      const entry = document.createElement('div');
      entry.style.marginBottom = '8px';
      entry.style.paddingBottom = '8px';
      entry.style.borderBottom = '1px solid #374151';
      entry.innerHTML = `
        <span style="color: #9ca3af;">[${timestamp}]</span>
        <span style="color: #f59e0b; font-weight: bold;">${callbackName}()</span>
        <pre style="margin: 4px 0 0 0; color: #e5e7eb;">${JSON.stringify(data, null, 2)}</pre>
      `;
      
      log.insertBefore(entry, log.firstChild);
      
      // Max 10 esem√©ny
      while (log.children.length > 10) {
        log.removeChild(log.lastChild);
      }
    }

    // √öj sor hozz√°ad√°sa az attrib√∫tum t√°bl√°hoz
    let attributeRowId = 4;
    function addAttributeRow() {
      const attributeTable = document.getElementById('attributeTable');
      const items = ['AirPods', 'Apple Watch', 'Magic Mouse', 'Magic Keyboard'];
      const randomItem = items[Math.floor(Math.random() * items.length)];
      const randomStock = Math.floor(Math.random() * 20) + 1;
      
      const newRow = { 
        id: attributeRowId++, 
        item: randomItem, 
        stock: randomStock 
      };
      
      attributeTable.data = [newRow, ...attributeTable.data];
    }
  </script>
</body>
</html>
